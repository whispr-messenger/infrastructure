---
# VaultDynamicSecret fetches dynamic Redis credentials from Vault for auth-service
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultDynamicSecret
metadata:
  name: auth-service-redis-creds
  namespace: whispr-prod
spec:
  vaultAuthRef: auth-service-vault-auth
  mount: database
  path: creds/redis_role_auth_service
  destination:
    create: true
    name: auth-service-redis-secret
  rolloutRestartTargets:
    - kind: Deployment
      name: auth-service
  renewalPercent: 67
  revoke: true
