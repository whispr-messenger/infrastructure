---
# VaultStaticSecret syncs the Redis Sentinel password from Vault KV
# Required for ioredis Sentinel mode to authenticate to Sentinel nodes
apiVersion: secrets.hashicorp.com/v1beta1
kind: VaultStaticSecret
metadata:
  name: messaging-service-redis-sentinel
  namespace: whispr-prod
spec:
  vaultAuthRef: messaging-service-vault-auth
  mount: kv
  type: kv-v2
  path: whispr/shared/redis
  destination:
    name: messaging-service-redis-sentinel-secret
    create: true
  refreshAfter: 1h
